{"version":3,"sources":["components/header/Header.jsx","components/footer/Footer.jsx","components/semanticex/similarityview/SimilarityView.jsx","components/helperfunctions/HelperFunctions.jsx","components/semanticex/datasetview/DatasetView.jsx","components/helperfunctions/DrawLine.jsx","components/semanticex/configview/ConfigView.jsx","components/semanticex/SemanticEx.jsx","components/embeddingex/embeddingview/EmbeddingView.jsx","components/embeddingex/embeddingview/Bar.jsx","components/embeddingex/EmbeddingEx.jsx","components/Main.js","serviceWorker.js","index.js","images/bgwhite.png"],"names":["Header","className","aria-label","href","src","alt","exact","to","Footer","style","zIndex","target","Component","SimilarityView","props","useEffect","selections","imageBasePath","basePath","dataset","name","selectedImagePath","selectedImage","selectedCat","dictionary","topSimilar","simCount","modelScore","totalScore","incorrectResults","i","similarityArray","slice","String","push","similarImagesList","map","alldata","index","imagePath","correctCategory","key","backgroundColor","onClick","setSelectedImage","indexvalue","searchPerformanceBox","toFixed","Tooltip","direction","triggerText","toUpperCase","display","show","getter","similarDrawer","abbreviateString","value","maxLength","length","substring","intlFormat","num","Intl","NumberFormat","format","Math","round","makeFriendly","abs","loadJSONData","url","fetch","then","response","status","json","data","console","log","catch","err","getElement","id","document","getElementById","checkInView","container","element","partial","containerOffset","elementOffset","cTop","scrollTop","cBottom","clientHeight","eTop","offsetTop","eBottom","ReactGA","initialize","window","LeaderLine","shuffleData","info","datasetContent","Object","keys","row","path","shuffle","DatasetView","classlist","useState","setSimilarityArray","dataRandom","setDataRandom","similarityPath","model","metric","layer","meta","allData","clickImage","advancedDrawer","setter","allDataByCategory","datasetClasses","clist","classes","classval","header","require","datasetTitle","description","Tabs","selected","Tab","label","animOptions","duration","timing","drawArcLines","layers","lineHolder","layerBox","modelBox","modelVisible","lineParams","currentLayerBox","isPrima","startElement","endElement","color","endSocket","endPlugSize","size","entries","param","line","startPlug","endPlug","startPlugColor","hide","startSocket","querySelector","drawLines","ConfigView","config","models","selectedModel","selectedLayer","useRef","isScrolling","selectedModelRef","selectedLayerRef","laysersRef","showMetrics","removeLines","current","forEach","each","remove","scrollEndedHandler","clearTimeout","setTimeout","addEventListener","scrollTo","top","left","behavior","removeEventListener","datasetImageList","datasets","dsdata","iconPath","icon","selectedDataset","modelImageList","mdata","layerImageList","ldata","layer_index","modelparameters","metricImageList","metrics","selectedDistanceMetric","dimReductionList","dimreduction","dim","selectedDimReduction","advanced","numlayers","type","SemanticEx","modelViewDetails","datasetViewDetails","setSelectedDataset","setSelectedModel","setSelectedDistanceMetric","setSelectedLayer","showAdvanced","setShowAdvanced","setSimilarDrawer","setAdvancedDrawer","title","datasetInfo","process","selectedModelImagePath","Toggle","labelA","labelB","defaultToggled","onToggle","margin","toolTip","createElement","toolTipImg","toolTipLabel","appendChild","toolTipImgBasePath","zoom","d3","extent","scaleExtent","updateAxes","x","domain","d","range","y","z","class","handleMouseOver","e","attr","innerHTML","handleMouseOut","EmbeddingView","scoreData","umapPath","svg","transition","selectAll","join","on","legendBox","legendRow","legendText","legendCircle","updateGraph","transform","pathGroup","append","call","drawGraph","prepend","Bar","datasetList","SelectItem","text","modelList","layerList","datestImagePath","modelImagePath","layerImagePath","Select","defaultValue","width","onChange","selectedIndex","labelText","EmbeddingEx","setSelectedDimReduction","history","createBrowserHistory","basename","forceRefresh","keyLength","getUserConfirmation","message","callback","confirm","listen","location","linkHolder","updateLh","hash","Main","state","component","Boolean","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","error","module","exports"],"mappings":"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","file":"static/js/main.c4eeaf1e.chunk.js","sourcesContent":["/**\n * @license\n * Copyright 2019 Fast Forward Labs.\n * Written by / Contact : https://github.com/victordibia\n * NeuralQA - NeuralQA: Question Answering on Large Datasets with BERT.\n * Licensed under the MIT License (the \"License\");\n * =============================================================================\n */\n\nimport React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport \"./header.css\";\n\nexport default function Header() {\n  const appName = \"ConvNet Playground\";\n  const appDescription = \"ConvNet Playground\";\n  return (\n    <div>\n      <div className=\"headermain\" aria-label={appDescription}>\n        <div className=\"container-fluid w100 headerrow pl10 \">\n          <div className=\"flex    h100\">\n            <div className=\"h100   flex flexjustifycenter mr10  \">\n              <a href={process.env.PUBLIC_URL + \"/#\"}>\n                <img\n                  className=\"headericon\"\n                  src=\"images/icon.png\"\n                  alt=\"NeuralQA logo\"\n                />\n              </a>\n            </div>\n            <div className=\"h100 apptitle  flex flexjustifycenter  mr10\">\n              <div className=\"whitetext boldtext  iblock mr10\"> {appName} </div>\n            </div>\n            <div className=\"h100   flex flexjustifycenter  navbarlinks \">\n              <NavLink exact to=\"/\">\n                Semantic Search{\" \"}\n              </NavLink>\n            </div>\n            <div className=\"h100   flex flexjustifycenter  navbarlinks \">\n              <NavLink exact to=\"/embeddings\">\n                Embeddings{\" \"}\n              </NavLink>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div></div>\n      <div className=\"headerboost\"> </div>\n    </div>\n  );\n}\n","/**\n * @license\n * Copyright 2019 Fast Forward Labs.\n * Written by Victor Dibia / Contact : https://github.com/victordibia\n * CaseQA - CaseQA: Question Answering on Large Datasets with BERT.\n * Licensed under the MIT License (the \"License\");\n * =============================================================================\n */\n\nimport React, { Component } from \"react\";\nimport \"./footer.css\";\n\nclass Footer extends Component {\n  render() {\n    return (\n      <div style={{ zIndex: 999000 }} className=\"centerpage pl10\">\n        Made with <span className=\"redcolor\">&#9829;</span> at{\" \"}\n        <a href=\"http://experiments.fastforwardlabs.com/\" target=\"blank\">\n          Cloudera Fast Forward Labs\n        </a>\n        .\n      </div>\n    );\n  }\n}\n\nexport default Footer;\n","/**\n * @license\n * Copyright 2019 Fast Forward Labs.\n * Written by / Contact : https://github.com/victordibia\n * NeuralQA - NeuralQA: Question Answering on Large Datasets with BERT.\n * Licensed under the MIT License (the \"License\");\n * =============================================================================\n */\n\nimport React, { useEffect } from \"react\";\nimport { Tooltip } from \"carbon-components-react\";\nimport \"./similarityview.css\";\nexport default function SimilarityView(props) {\n  //TODO do we want to do something with incorrect results? e.g. visualize differently?\n  useEffect(() => {\n    // Update the document title using the browser API\n    // document.title = `You clicked ${count} times`;\n  });\n\n  const selections = props.selections;\n\n  const imageBasePath =\n    selections.basePath +\n    \"/assets/semsearch/datasets/\" +\n    selections.dataset.name +\n    \"/\";\n  const selectedImagePath = imageBasePath + props.selectedImage + \".jpg\";\n  const selectedCat = selections.dictionary[props.selectedImage];\n\n  const topSimilar = selections.topSimilar;\n  let simCount = 0;\n  let modelScore = 0;\n  let totalScore = 0;\n  let incorrectResults = [];\n\n  for (var i in props.similarityArray.slice(1, topSimilar + 1)) {\n    if (\n      String(selectedCat) ===\n      String(selections.dictionary[props.similarityArray[i]])\n    ) {\n      simCount++;\n      modelScore += (topSimilar - i) / topSimilar;\n    } else {\n      incorrectResults.push(props.similarityArray[i]);\n    }\n    totalScore += (topSimilar - i) / topSimilar;\n  }\n\n  // console.log(selectedImagePath);\n\n  const similarImagesList = props.similarityArray.map((alldata, index) => {\n    let imagePath = imageBasePath + alldata + \".jpg\";\n    // console.log(imagePath)\n\n    let correctCategory =\n      selections.dictionary[props.selectedImage] ===\n      selections.dictionary[alldata];\n    return (\n      <div\n        key={alldata + \"winper\"}\n        className=\"iblock similarityfullbox mr5 mb5 positionrelative\"\n      >\n        <div\n          style={{ backgroundColor: correctCategory ? \"green\" : \"red\" }}\n          className=\"trigreen\"\n        ></div>\n\n        <img\n          key={alldata + \"image\" + alldata}\n          // onMouseOver={this.hoverSimilarImage.bind(this)}\n          onClick={() => props.setSelectedImage(alldata)}\n          src={imagePath}\n          alt=\"\"\n          className={\"simiimage simcomp clickable rad2 \"}\n          indexvalue={alldata}\n        />\n      </div>\n    );\n  });\n\n  const searchPerformanceBox = (\n    <div className=\"floatleft iblock mr10 rad3 \">\n      {/* <div className=\"pb5 smalldesc \"> Search result score </div> */}\n      <div className=\"topscorediv\">\n        <div className=\"mainscore  topmainscore\">\n          {((modelScore / totalScore) * 100).toFixed(1) + \"%\"}{\" \"}\n        </div>\n\n        <div className=\"weightedscore smalldesc textaligncenter\">\n          <Tooltip direction={\"right\"} triggerText=\"What is this?\">\n            <div className=\"wscore\">\n              This is the percentage of returned results that belong to the same\n              category as the selected image (weighted by position in the result\n              list). For the current search,{\" \"}\n              <strong>\n                {simCount} / {topSimilar} results{\" \"}\n              </strong>{\" \"}\n              are in same category{\" \"}\n              <strong>({selectedCat.toUpperCase()})</strong>. Note that this\n              score is conservative - some images may belong to different\n              classes but are <span className=\"italics\"> similar </span> (e.g\n              sedan, beetle, ferrari are <span className=\"italics\">all</span>{\" \"}\n              cars).\n            </div>\n          </Tooltip>\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div\n      style={{\n        display: selections.show.getter.similarDrawer ? \"\" : \"none\",\n      }}\n      className=\" mb10\"\n    >\n      <div className=\"sliderboxcontainer transition3s\">\n        <div className={\" sliderbox topconfig\" + (true ? \" open\" : \" closed\")}>\n          <div className=\"glowbar transitionw6s mb7 w0\"></div>\n          <div className=\"flex \">\n            <div className=\"iblock h100 positionrelative  mr10\">\n              <img\n                src={selectedImagePath}\n                className=\"mainsimilarityimage rad4  iblock\"\n                alt=\"\"\n              />\n              <div className=\"mt5  mainsimilaritytitle  p10  lightbluehightlight\">\n                <div className=\"boldtext iblock mediumdesc mr5\">\n                  {\" \"}\n                  SELECTED IMAGE{\" \"}\n                </div>\n                <div className=\"iblock smalldesc pt5 \">\n                  {\" \"}\n                  {selectedCat.toUpperCase()} <strong> </strong>\n                </div>\n              </div>\n\n              {/* <div> searchimi number {this.state.selectedsimimage}</div> */}\n            </div>\n            <div className=\" flexfull\">\n              <div className=\"scrollwindow simiwindow \">\n                {searchPerformanceBox}\n                {similarImagesList.slice(1, topSimilar)}\n                <br />\n                <br />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import ReactGA from \"react-ga\";\nimport { shuffle } from \"lodash\";\nReactGA.initialize(\"UA-53030428-17\");\n\nexport function registerGAEvent(\n  componentName,\n  eventCategory,\n  eventAction,\n  componentLoadTime\n) {\n  let eventTime = new Date().getTime() - componentLoadTime;\n  if (window.location.hostname !== \"localhost\") {\n    console.log(\"GA\", eventCategory, eventTime, eventAction, componentName);\n    ReactGA.event({\n      category: eventCategory,\n      action: eventAction,\n      value: eventTime,\n      label: componentName,\n    });\n  }\n}\n\nexport function abbreviateString(value, maxLength) {\n  if (value.length <= maxLength) {\n    return value;\n  } else {\n    let retval = value.substring(0, maxLength) + \" ..\";\n    return retval;\n  }\n}\n\nexport function boundWidth(widthVal) {\n  if (widthVal < 0) {\n    return 0;\n  } else if (widthVal > 1) {\n    return 1;\n  } else {\n    return widthVal;\n  }\n}\n\nfunction intlFormat(num) {\n  return new Intl.NumberFormat().format(Math.round(num * 10) / 10);\n}\nexport function makeFriendly(num) {\n  if (num < 1 && num > 0) {\n    return num;\n  }\n  if (Math.abs(num) >= 1000000) return intlFormat(num / 1000000) + \"M\";\n  if (Math.abs(num) >= 1000) return intlFormat(num / 1000) + \"k\";\n  return intlFormat(num);\n}\n\nexport function loadJSONData(url) {\n  return fetch(url)\n    .then(function (response) {\n      if (response.status !== 200) {\n        console.log(\n          \"Looks like there was a problem. Status Code: \" + response.status\n        );\n        return;\n      }\n      // Examine the text in the response\n      //    response.text().then(function(data){\n      //        console.log(data)\n      //    })\n      return response.json().then(function (data) {\n        return data;\n      });\n    })\n    .catch(function (err) {\n      console.log(\"Fetch Error :-S\", err);\n    });\n}\n\nexport function getElement(id) {\n  return document.getElementById(id);\n}\n\nexport function ColorArray() {\n  let colorArray = [\n    \"#1f78b4\",\n    \"#b2df8a\",\n    \"#33a02c\",\n    \"#fb9a99\",\n    \"#e31a1c\",\n    \"#fdbf6f\",\n    \"#ff7f00\",\n    \"#6a3d9a\",\n    \"#cab2d6\",\n    \"#ffff99\",\n    \"#8fff4f\",\n  ];\n  return colorArray;\n}\n\nexport function ColorArrayRGB() {\n  let colorArray = [\n    [141, 211, 199],\n    [255, 255, 179],\n    [190, 186, 218],\n    [251, 128, 114],\n    [128, 177, 211],\n    [253, 180, 98],\n    [179, 222, 105],\n    [252, 205, 229],\n    [188, 128, 189],\n    [204, 235, 197],\n  ];\n  return colorArray;\n}\n\nexport function checkInView(\n  container,\n  element,\n  partial,\n  containerOffset,\n  elementOffset\n) {\n  if (container) {\n    //Get container properties\n    let cTop = container.scrollTop;\n    let cBottom = cTop + container.clientHeight + containerOffset;\n\n    //Get element properties\n    let eTop = element.offsetTop + elementOffset;\n    let eBottom = eTop + element.clientHeight;\n\n    //Check if in view\n    let isTotal = eTop >= cTop && eBottom <= cBottom;\n    let isPartial =\n      partial &&\n      ((eTop < cTop && eBottom > cTop) ||\n        (eBottom > cBottom && eTop < cBottom));\n\n    //Return outcome\n    // console.log(\"cT:\", cTop, \"conHei\", container.clientHeight, \" offset\", containerOffset, elementOffset, container.offsetTop)\n    // console.log(element.offsetTop, \"eT:\", eTop, \"cT:\", cTop, \"eB:\", eBottom, \"cB:\", cBottom, isTotal || isPartial)\n    return isTotal || isPartial;\n  } else {\n    return false;\n  }\n}\n\nexport const LeaderLine = window.LeaderLine;\nexport const animOptions = { duration: 800, timing: \"ease\" };\nexport const greyColor = \"rgba(189, 195, 199, 0.5)\";\nexport const blueColor = \"rgba(0,98,255, 1)\";\n\nexport function shuffleData(data, info) {\n  let datasetContent = [];\n  const imageBasePath = process.env.PUBLIC_URL + \"/assets/semsearch/datasets/\";\n\n  for (const row of Object.keys(data)) {\n    for (const i of data[row]) {\n      const imagePath = imageBasePath + info.name + \"/\" + i + \".jpg\";\n      datasetContent.push({ path: imagePath, index: i });\n    }\n  }\n  return shuffle(datasetContent);\n}\n","/**\n * @license\n * Copyright 2019 Fast Forward Labs.\n * Written by / Contact : https://github.com/victordibia\n * NeuralQA - NeuralQA: Question Answering on Large Datasets with BERT.\n * Licensed under the MIT License (the \"License\");\n * =============================================================================\n */\n\nimport React, { useState, useEffect } from \"react\";\nimport { Tabs, Tab } from \"carbon-components-react\";\nimport \"./datasetview.css\";\nimport SimilarityView from \"../similarityview/SimilarityView\";\nimport {\n  loadJSONData,\n  shuffleData,\n} from \"../../helperfunctions/HelperFunctions\";\n\nexport default function DatasetView(props) {\n  const selections = props.selections;\n  const classlist = selections.classlist;\n  const [selectedImage, setSelectedImage] = useState(0);\n  const [similarityArray, setSimilarityArray] = useState(null);\n\n  const [dataRandom, setDataRandom] = useState([]);\n  const similarityPath =\n    selections.basePath +\n    \"/assets/semsearch/similarity/\" +\n    selections.dataset.name +\n    \"/\" +\n    selections.model.name +\n    \"/\" +\n    selections.metric +\n    \"/\" +\n    selections.layer.name +\n    \".json\";\n\n  useEffect(() => {\n    setDataRandom(shuffleData(props.data, props.meta));\n  }, [props.data, props.meta]);\n\n  useEffect(() => {\n    // console.log(\"json reloaded\");\n    let loadedJSON = loadJSONData(similarityPath);\n    loadedJSON.then(function (data) {\n      if (data) {\n        setSimilarityArray(data);\n      }\n    });\n  }, [similarityPath]);\n\n  const allData = dataRandom.map((data, index) => {\n    return (\n      <div\n        key={index + \"winper\"}\n        className=\"iblock similarityfullbox mr5 mb5 positionrelative\"\n      >\n        <img\n          key={\"image\" + index}\n          onClick={() => clickImage(data.index)}\n          src={data.path}\n          alt=\"\"\n          className={\n            \"simiimage clickable rad2 \" +\n            (data.index + \"\" === selectedImage + \"\" ? \"active\" : \"\")\n          }\n          indexvalue={data.index}\n        />\n      </div>\n    );\n  });\n\n  function clickImage(id) {\n    setSelectedImage(id);\n    // console.log(id, \"clicked\", selections.show.getter.advancedDrawer);\n    if (selections.show.getter.advancedDrawer) {\n      selections.show.setter.advancedDrawer(false);\n    }\n  }\n\n  let allDataByCategory = [];\n  const datasetClasses = classlist[selections.dataset.name];\n\n  for (const className of datasetClasses) {\n    let classcon = selections.classes[selections.dataset.name];\n    let clist = classcon[className].map((classval, index) => {\n      let imagePath =\n        selections.basePath +\n        \"/assets/semsearch/datasets/\" +\n        selections.dataset.name +\n        \"/\" +\n        classval +\n        \".jpg\";\n      return (\n        <div\n          key={classval + \"winper\"}\n          className=\"iblock similarityfullbox mr5 mb5 positionrelative\"\n        >\n          <img\n            key={classval + \"image\"}\n            onClick={() => clickImage(classval)}\n            src={imagePath}\n            alt=\"\"\n            className={\n              \"simiimage clickable rad2 \" +\n              (selectedImage === classval ? \"active\" : \"\")\n            }\n            indexvalue={classval}\n          />\n        </div>\n      );\n    });\n    let header = (\n      <div key={\"header\" + className} className=\"iblock mr5 categorymain  mb5 \">\n        <div>\n          <div className=\" boldtext categorytitle\">\n            {\" \"}\n            {className.toUpperCase()}{\" \"}\n          </div>\n          <img\n            src={require(\"../../../images/bgwhite.png\")}\n            alt=\"\"\n            className={\"categorybox rad2 \"}\n          />\n        </div>\n      </div>\n    );\n\n    allDataByCategory.push(header);\n    allDataByCategory.push(clist);\n  }\n\n  const datasetTitle = (\n    <div className=\"mb10\">\n      <span className=\"boldtext\"> Dataset : {props.meta.name}</span>{\" \"}\n      <span className=\"mediumdesc\"> {props.meta.description}</span>\n    </div>\n  );\n\n  return (\n    <div className=\"mt10\">\n      {/* top results */}\n      {/* show top results panel and content */}\n      {\n        <div>\n          <div className=\"unselectable mt10    flex \">\n            <div\n              // onClick={() =>\n              //   show.setter.similarDrawer(!show.getter.similarDrawer)\n              // }\n              className=\" iblock darkborderbottom lightgreyhighlight flexfull minwidth485 p10\"\n            >\n              <strong>Top {props.selections.topSimilar} results </strong> based\n              on your search configuration\n              <span className=\"smalldesc\">\n                {\" \"}\n                [<strong> MODEL: </strong>{\" \"}\n                {props.selections.model.name.toUpperCase()} |\n                <strong> LAYER: </strong> {props.selections.layer.name} |\n                <strong> DISTANCE METRIC: </strong>{\" \"}\n                {props.selections.metric.toUpperCase()} ]\n              </span>\n            </div>\n          </div>\n        </div>\n      }\n      {similarityArray && (\n        <SimilarityView\n          selectedImage={selectedImage}\n          similarityArray={similarityArray[selectedImage]}\n          setSelectedImage={clickImage}\n          selections={props.selections}\n        ></SimilarityView>\n      )}\n      <Tabs selected={0}>\n        <Tab id=\"tab-1\" label=\"All Data\">\n          <div className=\"scrollwindow  datasetdivbox\">\n            {datasetTitle}\n            {allData}\n          </div>\n        </Tab>\n        <Tab id=\"tab-2\" label=\"By Category\">\n          <div className=\"scrollwindow  datasetdivbox\">\n            {datasetTitle}\n            {allDataByCategory}\n          </div>\n        </Tab>\n      </Tabs>\n    </div>\n  );\n}\n","export const LeaderLine = window.LeaderLine;\nexport const animOptions = { duration: 800, timing: \"ease\" };\nexport const greyColor = \"rgba(189, 195, 199, 0.5)\";\nexport const blueColor = \"rgba(0,98,255, 1)\";\n\nexport function removeLines(lineHolder) {\n  lineHolder.forEach(function (each) {\n    each.line.remove();\n  });\n  lineHolder = [];\n}\n\nexport function drawLines(lineHolder, lineParams) {\n  // removeLines(lineHolder);\n  for (const [i, param] of lineParams.entries()) {\n    let line = new LeaderLine(param.startElement, param.endElement, {\n      color: param.color,\n      startPlug: \"disc\",\n      endPlug: \"disc\",\n      startPlugColor: param.color,\n      path: \"fluid\",\n      size: param.size,\n      hide: true,\n      startSocket: \"bottom\",\n      endSocket: param.endSocket,\n      endPlugSize: param.endPlugSize,\n      //   startPlugSize: param.startPlugSize,\n    });\n    document.querySelector(\".leader-line\").style.zIndex = -100;\n    animOptions.duration = 800;\n    line.show(\"draw\", animOptions);\n    lineHolder.push({ line: line, index: i });\n  }\n}\n","/**\n * @license\n * Copyright 2019 Fast Forward Labs.\n * Written by / Contact : https://github.com/victordibia\n * NeuralQA - NeuralQA: Question Answering on Large Datasets with BERT.\n * Licensed under the MIT License (the \"License\");\n * =============================================================================\n */\n\nimport React, { useEffect, useRef } from \"react\";\nimport \"./configview.css\";\nimport {\n  abbreviateString,\n  makeFriendly,\n  getElement,\n  blueColor,\n  greyColor,\n  checkInView,\n} from \"../../helperfunctions/HelperFunctions\";\nimport { Tooltip } from \"carbon-components-react\";\nimport { drawLines } from \"../../helperfunctions/DrawLine\";\n\nfunction drawArcLines(model, layer, layers, lineHolder) {\n  const layerBox = getElement(\"layerscrollbox\");\n  const modelBox = getElement(\"modelscrollbox\");\n  const elementOffset = -1 * modelBox.offsetTop - 30;\n\n  // only draw lines if the model and the layer are visible\n  const modelVisible = checkInView(\n    modelBox,\n    getElement(\"modelimg\" + model),\n    true,\n    -80,\n    elementOffset\n  );\n\n  const lineParams = [];\n  for (const i in layers) {\n    const currentLayerBox = getElement(\"layerimg\" + i);\n    const layerVisible = checkInView(\n      layerBox,\n      currentLayerBox,\n      true,\n      -80,\n      elementOffset\n    );\n    if (layerVisible && modelVisible) {\n      const isPrima = String(layer) === String(i);\n      lineParams.push({\n        startElement: getElement(\"modelimg\" + model),\n        endElement: currentLayerBox,\n        color: isPrima ? blueColor : greyColor,\n        endSocket: isPrima ? \"top\" : \"left\",\n        endPlugSize: 2,\n        size: isPrima ? 2.5 : 1.5,\n      });\n    }\n  }\n  drawLines(lineHolder, lineParams);\n}\n\nexport default function ConfigView(props) {\n  const selections = props.selections;\n  const show = selections.show;\n  const config = selections.config;\n  const layers = props.models[config.getter.selectedModel].layers;\n  const selectedLayer = layers[config.getter.selectedLayer];\n\n  const lineHolder = useRef([]);\n  const isScrolling = useRef(null);\n  const selectedModelRef = useRef(config.getter.selectedModel);\n  const selectedLayerRef = useRef(config.getter.selectedLayer);\n  const laysersRef = useRef(layers);\n  const showMetrics = props.showMetrics;\n\n  function removeLines() {\n    lineHolder.current.forEach(function (each) {\n      each.line.remove();\n    });\n    lineHolder.current = [];\n  }\n\n  useEffect(() => {\n    function scrollEndedHandler() {\n      window.clearTimeout(isScrolling.current);\n      isScrolling.current = setTimeout(function () {\n        // console.log(\"Scrolling has stopped.\");\n        removeLines();\n        drawArcLines(\n          selectedModelRef.current,\n          selectedLayerRef.current,\n          laysersRef.current,\n          lineHolder.current\n        );\n      }, 200);\n    }\n    const layerBox = getElement(\"layerscrollbox\");\n    const modelBox = getElement(\"modelscrollbox\");\n\n    // console.log(\"adding listeners\");\n    window.addEventListener(\"resize\", scrollEndedHandler);\n    modelBox.addEventListener(\"scroll\", scrollEndedHandler, false);\n    layerBox.addEventListener(\"scroll\", scrollEndedHandler, false);\n\n    layerBox.scrollTo({\n      top: 100,\n      left: 0,\n      behavior: \"smooth\",\n    });\n\n    return function cleanup() {\n      removeLines();\n      // console.log(\"removing listeners\");\n      window.removeEventListener(\"resize\", scrollEndedHandler);\n      modelBox.removeEventListener(\"scroll\", scrollEndedHandler, false);\n      layerBox.removeEventListener(\"scroll\", scrollEndedHandler, false);\n    };\n  }, []);\n\n  useEffect(() => {\n    // console.log(\"config change effect loaded .. drawing\");\n    selectedModelRef.current = config.getter.selectedModel;\n    selectedLayerRef.current = config.getter.selectedLayer;\n    laysersRef.current = layers;\n    // console.log(\"adding handlers\");\n    drawArcLines(\n      config.getter.selectedModel,\n      config.getter.selectedLayer,\n      layers,\n      lineHolder.current\n    );\n\n    return function cleanup() {\n      removeLines();\n    };\n  }, [\n    config.getter.selectedModel,\n    config.getter.selectedLayer,\n    layers,\n    show.getter.advancedDrawer,\n  ]);\n\n  // console.log(props.metrics, config.getter.selectedDistanceMetric);\n\n  let datasetImageList = props.datasets.map((dsdata, index) => {\n    let iconPath =\n      selections.basePath + \"/assets/semsearch/images/\" + dsdata.icon;\n    // console.log(dsdata)\n    return (\n      <div\n        key={dsdata.name + \"fullbox\" + index}\n        className=\"iblock mr10 datasetfullbox clickable mb10\"\n      >\n        <div className=\"datasettitles\"> {dsdata.name.toUpperCase()}</div>\n        <div className=\"smalldesc pb5\">{dsdata.size} images </div>\n        <img\n          onClick={() => config.setter.selectedDataset(index)}\n          src={iconPath}\n          alt=\"\"\n          className={\n            \"datasetbox rad2 \" +\n            (String(config.getter.selectedDataset) === String(index)\n              ? \"active\"\n              : \"\")\n          }\n          indexvalue={index}\n        />\n      </div>\n    );\n  });\n\n  let modelImageList = props.models.map((mdata, index) => {\n    let imagePath =\n      selections.basePath +\n      \"/assets/models/\" +\n      props.models[index].name +\n      \"/\" +\n      props.models[index].layers[props.models[index].layers.length - 1].name +\n      \"/0.jpg\";\n    // console.log(props.models);\n\n    return (\n      <div\n        id={\"modelimgbox\" + index}\n        key={mdata.name + \"fullbox\" + index}\n        className=\"iblock datasetfullbox mr10 clickable mb10 \"\n      >\n        <div className=\"datasettitles\">\n          {\" \"}\n          {abbreviateString(mdata.name.toUpperCase(), 11)}\n        </div>\n        <div className=\"smalldesc pb5\">\n          {makeFriendly(mdata[\"modelparameters\"])} params.{\" \"}\n        </div>\n        <img\n          id={\"modelimg\" + index}\n          onClick={() => config.setter.selectedModel(index)}\n          src={imagePath}\n          alt=\"\"\n          className={\n            \"datasetbox rad2 \" +\n            (String(config.getter.selectedModel) === String(index)\n              ? \"active\"\n              : \"\")\n          }\n          indexvalue={index}\n        />\n      </div>\n    );\n  });\n\n  let layerImageList = layers.map((ldata, index) => {\n    let imagePath =\n      selections.basePath +\n      \"/assets/models/\" +\n      selections.model.name +\n      \"/\" +\n      layers[index].name +\n      \"/0.jpg\";\n\n    return (\n      <div\n        key={ldata + \"fullbox\" + index}\n        className=\"iblock datasetfullbox mr10 clickable mb10 \"\n      >\n        <div className=\"datasettitles\"> {\"layer \" + ldata.layer_index} </div>\n        {/* {abbreviateString(ldata.name, 11).toLowerCase()}  */}\n        <div className=\"smalldesc pb5\">\n          {\" \"}\n          {makeFriendly(ldata.modelparameters)} params\n        </div>\n        <img\n          id={\"layerimg\" + index}\n          onClick={() => selections.config.setter.selectedLayer(index)}\n          src={imagePath}\n          alt=\"\"\n          className={\n            \"datasetbox rad2 \" +\n            (String(config.getter.selectedLayer) === String(index)\n              ? \"active\"\n              : \"\")\n          }\n          indexvalue={index}\n        />\n      </div>\n    );\n  });\n\n  let metricImageList = props.metrics.map((metric, index) => {\n    return (\n      <div\n        key={metric + \"fullbox\" + index}\n        className=\" positionrelative mr10 iblock datasetfullbox clickable mb10 \"\n      >\n        <div className=\"datasettitles\">\n          {\" \"}\n          {abbreviateString(metric, 11).toUpperCase()}{\" \"}\n        </div>\n        <div className=\"smalldesc pb5\"> distance</div>\n        <div className=\"metrictitle positionabsolute\">\n          {\" \"}\n          {abbreviateString(metric, 4).toUpperCase()}\n        </div>\n        <img\n          onClick={() => config.setter.selectedDistanceMetric(index)}\n          src={require(\"../../../images/bgwhite.png\")}\n          alt=\"\"\n          className={\n            \"datasetbox rad2 \" +\n            (String(config.getter.selectedDistanceMetric) === String(index)\n              ? \"active\"\n              : \"\")\n          }\n          indexvalue={index}\n        />\n      </div>\n    );\n  });\n\n  let dimReductionList = (props.dimreduction || []).map((dim, index) => {\n    return (\n      <div\n        key={dim + \"fullbox\" + index}\n        className=\" positionrelative iblock mr10 clickable mb10 \"\n      >\n        <div className=\"datasettitles \">\n          {abbreviateString(dim, 11).toUpperCase()}\n        </div>\n        <div className=\"smalldesc pb5\"> method </div>\n        <div className=\"metrictitle positionabsolute\">\n          {\" \"}\n          {abbreviateString(dim, 4).toUpperCase()}\n        </div>\n        <img\n          onClick={() => config.setter.selectedDimReduction(index)}\n          src={require(\"../../../images/bgwhite.png\")}\n          alt=\"\"\n          className={\n            \"datasetbox rad2 \" +\n            (String(config.getter.selectedDimReduction) === String(index)\n              ? \"active\"\n              : \"\")\n          }\n          indexvalue={index}\n        />\n      </div>\n    );\n  });\n\n  return (\n    <div className=\"mt10\">\n      <div className={\" \" + (show.getter.advanced ? \"\" : \" displaynone\")}>\n        {/* config panel and content */}\n        <div\n          onClick={() =>\n            show.setter.advancedDrawer(!show.getter.advancedDrawer)\n          }\n          className=\"unselectable mt10 p10 clickable darkborderbottom flex greymoreinfo\"\n        >\n          <div className=\"iblock flexfull minwidth485\">\n            <strong>\n              {\" \"}\n              {!show.getter.advancedDrawer && <span>&#x25BC; </span>}{\" \"}\n              {show.getter.advancedDrawer && <span>&#x25B2; </span>}{\" \"}\n            </strong>{\" \"}\n            <strong> Advanced Options</strong>\n          </div>\n          <div className=\"iblock   \">\n            <div className=\"iblock mr5\">\n              {\" \"}\n              <span className=\"boldtext uppercase\">\n                {\" \"}\n                {selections.dataset.name}\n              </span>\n            </div>\n            <div className=\"iblock\">\n              <div className=\"smalldesc\"> DATASET </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Configuration drawer */}\n        {\n          <div\n            style={{ zIndex: 500 }}\n            className={\n              \"flex  modelconfigdiv p10 \" +\n              (show.getter.advancedDrawer ? \"\" : \" displaynone\")\n            }\n          >\n            <div className=\"flex15  mr10\">\n              <div className=\"h100 flex flexcolumn \">\n                <div className=\" pb10 sectiontitle\">\n                  <div className=\"iblock\">Dataset</div>\n                  <div className=\"iblock\"></div>\n                </div>\n                <div className=\"horrule mb10\"></div>\n                <div className=\"flexfull datasetselectdiv scrollwindow layerwindow\">\n                  {datasetImageList}\n                </div>\n                <div className=\"\">\n                  <div className=\" iblock boldtext  boldtext datasetdescription mr10   p10 greyhighlight\">\n                    {selections.dataset.name.toUpperCase()}\n                  </div>\n                  {/* <div\n                  // onClick={this.toggleDatasetModal.bind(this)}\n                  className=\"iblock p10 greyhighlight clickable unselectable greymoreinfo\"\n                >\n                  {\" \"}\n                  ? More Info{\" \"}\n                </div> */}\n                </div>\n              </div>\n            </div>\n\n            <div style={{ zIndex: 100 }} className=\"mr10 flex35\">\n              <div className=\" pb10 sectiontitle\"> Model </div>\n              <div className=\"horrule mb10\"></div>\n              <div\n                id=\"modelscrollbox\"\n                className=\"datasetselectdiv scrollwindow layerwindow\"\n              >\n                {modelImageList}\n              </div>\n              <div className=\"flex flexwrap pr10\">\n                <div className=\"  mr10 \">\n                  <div className=\" iblock boldtext datasetdescription  p10 greyhighlight\">\n                    {selections.model.name.toUpperCase()}\n                  </div>\n                </div>\n                <div className=\"flexfull \">\n                  <div className=\"smalldesc pt4\">\n                    {\" \"}\n                    <strong>\n                      {\" \"}\n                      {makeFriendly(selections.model.modelparameters)}{\" \"}\n                      Parameters{\" \"}\n                    </strong>{\" \"}\n                  </div>\n                  <div className=\"smalldesc pt3\">\n                    {\" \"}\n                    {selections.model.numlayers} layers{\" \"}\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div style={{ zIndex: 100 }} className=\"flex3 pr10 \">\n              <div className=\"pb8 sectiontitle \">\n                <div className=\"iblock\">Layer</div>\n\n                <div className=\"iblock \">\n                  <Tooltip direction=\"left\" triggerText=\"\">\n                    <div className=\"wscore\">\n                      We construct{\" \"}\n                      <span className=\"italics\">intermediate models</span> from\n                      the main model at each of these layers. Each intermediate\n                      model has less parameters than the full model and is used\n                      for feature extraction.\n                      {/* <div class=\"bx--tooltip__footer\">\n                                                <a hid=\"#\" class=\"bx--link\">Learn More</a>\n                                                <button onClick={this.toggleSemanticModal.bind(this)} class=\"bx--btn bx--btn--primary bx--btn--sm\" type=\"button\">More Info</button>\n                                            </div> */}\n                    </div>\n                  </Tooltip>\n                </div>\n              </div>\n              <div className=\"horrule mb10\"></div>\n              <div\n                id=\"layerscrollbox\"\n                className=\"scrollwindow layerwindow  mr10\"\n              >\n                <div className=\"windowcontent\"> {layerImageList} </div>\n              </div>\n              <div className=\"flex flexwrap pr10\">\n                <div className=\"  mr10 \">\n                  <div className=\" iblock boldtext datasetdescription  p10 greyhighlight\">\n                    {\" LAYER \" + selectedLayer.layer_index}\n                  </div>\n                </div>\n                <div className=\"flexfull \">\n                  <div className=\"smalldesc pt4\">\n                    {\" \"}\n                    <strong>Type: {selectedLayer.type} </strong> |{\" \"}\n                    <span className=\"smalldesc\">\n                      {\" \"}\n                      {selectedLayer.name.toUpperCase()}{\" \"}\n                    </span>{\" \"}\n                  </div>\n                  <div className=\"smalldesc pt3\">\n                    {\" \"}\n                    {makeFriendly(selectedLayer.modelparameters)} model\n                    parameters{\" \"}\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {showMetrics && (\n              <div className=\"flex2 metricview\">\n                <div className=\"pb8 sectiontitle \">\n                  <div className=\"iblock\">Distance Metric</div>\n\n                  <div className=\"iblock \">\n                    <Tooltip direction=\"left\" triggerText=\"\">\n                      <div className=\"wscore\">\n                        The distance metric used to compute similarity between\n                        extracted features.\n                      </div>\n                    </Tooltip>\n                  </div>\n                </div>\n\n                <div className=\"horrule mb10\"></div>\n                <div className=\"scrollwindow layerwindow \">\n                  <div className=\"windowcontent\"> {metricImageList} </div>\n                </div>\n                <div className=\" iblock boldtext datasetdescription  p10 greyhighlight\">\n                  {\" \"}\n                  {props.metrics[\n                    config.getter.selectedDistanceMetric\n                  ].toUpperCase()}\n                </div>\n              </div>\n            )}\n\n            {!showMetrics && (\n              <div className=\"flex2 metricview\">\n                <div className=\"pb8 sectiontitle \">\n                  <div className=\"iblock\">Visualization </div>\n\n                  <div className=\"iblock \">\n                    <Tooltip direction=\"left\" triggerText=\"\">\n                      <div className=\"wscore\">\n                        The dimensionality reduction method used to plot image\n                        representations.\n                      </div>\n                    </Tooltip>\n                  </div>\n                </div>\n\n                <div className=\"horrule mb10\"></div>\n                <div className=\"scrollwindow layerwindow \">\n                  <div className=\"windowcontent\"> {dimReductionList} </div>\n                </div>\n                <div className=\" iblock boldtext datasetdescription  p10 greyhighlight\">\n                  {\" \"}\n                  {props.dimreduction[\n                    config.getter.selectedDimReduction\n                  ].toUpperCase()}\n                </div>\n              </div>\n            )}\n\n            <div className=\"horrule mb10\"></div>\n          </div>\n        }\n      </div>\n    </div>\n  );\n}\n","/**\n * @license\n * Copyright 2019 Fast Forward Labs.\n * Written by / Contact : https://github.com/victordibia\n * NeuralQA - NeuralQA: Question Answering on Large Datasets with BERT.\n * Licensed under the MIT License (the \"License\");\n * =============================================================================\n */\n\nimport React, { useState, useEffect } from \"react\";\nimport { Toggle } from \"carbon-components-react\";\nimport \"./semanticex.css\";\nimport DatasetView from \"./datasetview/DatasetView\";\nimport {\n  abbreviateString,\n  shuffleData,\n} from \"../helperfunctions/HelperFunctions\";\nimport ConfigView from \"./configview/ConfigView\";\n\nexport default function SemanticEx() {\n  //load useful data\n\n  const modelViewDetails = require(\"../../assets/semsearch/details.json\");\n  const datasetViewDetails = require(\"../../assets/semsearch/datasetdictionary.json\");\n  const topSimilar = 15;\n\n  //   specify state values and setters\n  const [selectedDataset, setSelectedDataset] = useState(0);\n  const [selectedModel, setSelectedModel] = useState(3);\n  const [selectedDistanceMetric, setSelectedDistanceMetric] = useState(0);\n  const [selectedLayer, setSelectedLayer] = useState(7);\n  const [showAdvanced, setShowAdvanced] = useState(false);\n  const [similarDrawer, setSimilarDrawer] = useState(true);\n  const [advancedDrawer, setAdvancedDrawer] = useState(true);\n\n  useEffect(() => {\n    document.title = `ConvNet Playground | Semantic Search Explorer`;\n  }, []);\n\n  const datasetInfo = modelViewDetails[\"datasets\"][selectedDataset];\n  const datasetContent = datasetViewDetails.classes[datasetInfo.name];\n\n  const selections = {\n    dataset: modelViewDetails.datasets[selectedDataset],\n    model: modelViewDetails.models[selectedModel],\n    layer: modelViewDetails.models[selectedModel].layers[selectedLayer],\n    metric: modelViewDetails.metrics[selectedDistanceMetric],\n    topSimilar: topSimilar,\n    basePath: process.env.PUBLIC_URL,\n    show: {\n      getter: {\n        similarDrawer: similarDrawer,\n        advanced: showAdvanced,\n        advancedDrawer: advancedDrawer,\n      },\n      setter: {\n        similarDrawer: setSimilarDrawer,\n        advancedDrawer: setAdvancedDrawer,\n      },\n    },\n    dictionary:\n      datasetViewDetails.dictionary[\n        modelViewDetails.datasets[selectedDataset].name\n      ],\n    config: {\n      getter: {\n        selectedDataset: selectedDataset,\n        selectedModel: selectedModel,\n        selectedDistanceMetric: selectedDistanceMetric,\n        selectedLayer: selectedLayer,\n      },\n      setter: {\n        selectedDataset: setSelectedDataset,\n        selectedModel: setSelectedModel,\n        selectedDistanceMetric: setSelectedDistanceMetric,\n        selectedLayer: setSelectedLayer,\n      },\n    },\n    classlist: datasetViewDetails.classlist,\n    classes: datasetViewDetails.classes,\n  };\n\n  const selectedModelImagePath =\n    selections.basePath +\n    \"/assets/models/\" +\n    selections.model.name +\n    \"/\" +\n    selections.layer.name +\n    \"/0.jpg\";\n  return (\n    <div>\n      <div className=\"flex \">\n        <div className=\"flexfull\">\n          <div className=\"  mynotif positionrelative  p10 lightbluehightlight maxh16  \">\n            {\n              <div className=\" floatright  lightgreyhighlight ml10 pl10 pr10 pb5 \">\n                <div className=\"boldtext  iblock \">\n                  <Toggle\n                    id=\"advancedoptionstoggle\"\n                    className=\"smalldesc boldtext mr10\"\n                    labelA=\"Off\"\n                    labelB=\"On\"\n                    defaultToggled={showAdvanced}\n                    // onChange action('onChange'),\n                    onToggle={() => {\n                      if (!showAdvanced) {\n                        setAdvancedDrawer(true);\n                      }\n                      setShowAdvanced(!showAdvanced);\n                    }}\n                  ></Toggle>\n                </div>\n\n                <div className=\"mediumdesc boldtext pb5\"> Advanced Options</div>\n              </div>\n            }\n            {/* <span className=\"boldtext mb5\">How Does It Work?</span>\n            <br /> */}\n            <div className=\"floatleft h100 borderright pr10 mb3 mr10\">\n              <img\n                className=\"introicon rad2 floatleft  mr10\"\n                src={selectedModelImagePath}\n                alt=\"\"\n              />\n              <div className=\"iblock \">\n                <div className=\"   \">\n                  <div className=\"smalldesc pb3  uppercase\">\n                    Dataset :{\" \"}\n                    <span className=\"boldtext\">{selections.dataset.name}</span>\n                  </div>\n                  <div className=\"pb3 smalldesc uppercase\">\n                    Model :{\" \"}\n                    <span className=\"boldtext\">{selections.model.name} </span>\n                    {/* <span className=\"smalldesc\">\n                      | {makeFriendly(selections.model.modelparameters)}{\" \"}\n                      parameters\n                    </span> */}\n                  </div>\n                  <div className=\"pb3 smalldesc uppercase\">\n                    Layer :{\" \"}\n                    <span className=\"boldtext\">\n                      {abbreviateString(selections.layer.name, 12)}{\" \"}\n                    </span>\n                    {/* <span className=\"smalldesc\">\n                      | {makeFriendly(selections.layer.modelparameters)}{\" \"}\n                      parameters\n                    </span> */}\n                  </div>\n                  <div className=\"smalldesc  uppercase\">\n                    Metric :{\" \"}\n                    <span className=\"boldtext\">{selections.metric}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <span className=\"lh10 mb10\">\n              When you select an image (by clicking it), a neural network model\n              [\n              <span className=\"uppercase boldtext\">\n                {\" \"}\n                {selections.model.name}\n              </span>{\" \"}\n              ]<span className=\"italics\"> looks </span> at the content of all\n              images in our dataset and identifies the{\" \"}\n              <strong> top {topSimilar} </strong> most similar images to the\n              selected image. Click advanced options to select a different\n              dataset, model (or intermediate model) and distance metric used\n              for semantic search.\n            </span>\n          </div>\n        </div>\n      </div>\n\n      {selections.show.getter.advanced && (\n        <ConfigView\n          models={modelViewDetails.models}\n          datasets={modelViewDetails.datasets}\n          metrics={modelViewDetails.metrics}\n          selections={selections}\n          showMetrics={true}\n        ></ConfigView>\n      )}\n\n      <DatasetView\n        data={datasetContent}\n        dataRandom={shuffleData(datasetContent, datasetInfo)}\n        meta={datasetInfo}\n        selections={selections}\n      ></DatasetView>\n      <br />\n      <br />\n    </div>\n  );\n}\n","/**\n * @license\n * Copyright 2019 Fast Forward Labs.\n * Written by / Contact : https://github.com/victordibia\n * NeuralQA - NeuralQA: Question Answering on Large Datasets with BERT.\n * Licensed under the MIT License (the \"License\");\n * =============================================================================\n */\n\nimport React, { useEffect, useRef } from \"react\";\nimport \"./embeddingview.css\";\nimport { loadJSONData } from \"../../helperfunctions/HelperFunctions\";\nimport * as d3 from \"d3\";\n\nconst width = 500;\nconst height = 230;\nconst margin = { top: 30, right: 10, bottom: 10, left: 10 };\n// const k =\n//   (height - margin.left - margin.right) / (width - margin.top - margin.bottom);\nconst strokeWidthNormal = 5;\nconst strokeWidthHover = 12;\nconst strokeOpacity = 0.6;\n\nconst toolTip = document.createElement(\"div\");\ntoolTip.className = \"hoveToolTip\";\ntoolTip.style.display = \"none\";\nconst toolTipImg = document.createElement(\"img\");\ntoolTipImg.className = \"tooltipimg\";\ntoolTipImg.id = \"tooltipimage\";\nconst toolTipLabel = document.createElement(\"div\");\n// toolTipLabel.innerHTML = \"bingoooo\";\ntoolTipLabel.className = \"tooltiplabel\";\ntoolTip.appendChild(toolTipLabel);\ntoolTip.appendChild(toolTipImg);\n\nlet toolTipImgBasePath = \"\";\n\nconst zoom = d3\n  .zoom()\n  .extent([\n    [0, 0],\n    [width, height],\n  ])\n  .scaleExtent([1, 8]);\n\nfunction updateAxes(data) {\n  const x = d3\n    .scaleLinear()\n    .domain(d3.extent(data, (d) => d.x))\n    .range([margin.left, width - margin.right]);\n  // console.log(x(23));\n  const y = d3\n    .scaleLinear()\n    .domain(d3.extent(data, (d) => d.y))\n    .range([margin.top, height - margin.bottom]);\n\n  const z = d3\n    .scaleOrdinal()\n    .domain(data.map((d) => d.class))\n    .range(d3.schemeCategory10);\n  return { x: x, y: y, z: z };\n}\n\nfunction drawGraph(data) {\n  const { x, y, z } = updateAxes(data);\n\n  zoom.on(\"zoom\", zoomed);\n\n  const svg = d3\n    .select(\"div.embeddingchart\")\n    .append(\"svg\")\n    // .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n    .attr(\"viewBox\", [0, 0, width, height])\n    .attr(\"preserveAspectRatio\", \"none\")\n    .attr(\"stroke-linecap\", \"round\");\n\n  const pathGroup = svg.append(\"g\").attr(\"class\", \"scattersvg\");\n  pathGroup\n    .selectAll(\"path\")\n    .data(data)\n    .join(\"path\")\n    .attr(\"d\", (d) => `M${x(d.x)},${y(d.y)}h0`)\n    .attr(\"stroke\", (d) => z(d.class))\n    .attr(\"stroke-opacity\", strokeOpacity)\n    .attr(\"stroke-width\", 5);\n\n  function zoomed({ transform }) {\n    pathGroup.attr(\"transform\", transform);\n  }\n  svg.call(zoom).call(zoom.transform, d3.zoomIdentity);\n}\n\nfunction updateGraph(data) {\n  const { x, y, z } = updateAxes(data);\n  const svg = d3.select(\".scattersvg\");\n\n  svg.transition().duration(950).attr(\"transform\", d3.zoomIdentity);\n\n  svg\n    .selectAll(\"path\")\n    .data(data)\n    .join(\"path\")\n    .on(\"mouseover\", handleMouseOver)\n    .on(\"mouseout\", handleMouseOut)\n    .transition()\n    .duration(750)\n    .attr(\"d\", (d) => `M${x(d.x)},${y(d.y)}h0`)\n    .attr(\"stroke\", (d) => z(d.class))\n    .attr(\"stroke-opacity\", strokeOpacity)\n    .attr(\"stroke-width\", strokeWidthNormal)\n    .attr(\"id\", (d, i) => i);\n\n  const legendBox = document.getElementById(\"legendbox\");\n  legendBox.innerHTML = \"\";\n\n  for (const row of z.domain()) {\n    const legendRow = document.createElement(\"div\");\n    const legendText = document.createElement(\"span\");\n    const legendCircle = document.createElement(\"div\");\n    legendRow.className = \"iblock mr10\";\n    legendCircle.className = \"legendcircle\";\n    legendCircle.style.backgroundColor = z(row);\n    legendText.className = \"legendtext\";\n    legendText.innerHTML = row;\n    legendRow.appendChild(legendCircle);\n    legendRow.appendChild(legendText);\n    legendBox.appendChild(legendRow);\n  }\n}\n\nfunction handleMouseOver(e, d) {\n  // console.log(d3.select(\".scattersvg\").selectAll(\"path\").nodes());\n  // const nodes = d3.select(\".scattersvg\").selectAll(\"path\").nodes();\n  // const i = nodes.indexOf(d3.select(e.currentTarget));\n\n  toolTipImg.src =\n    toolTipImgBasePath + \"/\" + d3.select(e.target).attr(\"id\") + \".jpg\";\n  toolTip.style.display = \"block\";\n  toolTipLabel.innerHTML = d.class;\n  d3.select(e.target)\n    .attr(\"stroke-opacity\", 1)\n    .attr(\"stroke-width\", strokeWidthHover)\n    .attr(\"mouseevent\", \"none\");\n}\n\nfunction handleMouseOut(e) {\n  toolTip.style.display = \"none\";\n\n  d3.select(e.target)\n    .attr(\"stroke-opacity\", 0.6)\n    .attr(\"stroke-width\", strokeWidthNormal);\n}\n\nexport default function EmbeddingView(props) {\n  const selections = props.selections;\n  // const show = selections.show;\n  // const config = selections.config;\n  // const layers = props.models[config.getter.selectedModel].layers;\n  // const selectedLayer = layers[config.getter.selectedLayer];\n\n  // const [umapArray, setUmapArray] = useState(null);\n  // console.log(selections.classlist[selections.dataset.name]);\n  const scoreData = useRef(null);\n\n  const umapPath =\n    selections.basePath +\n    \"/assets/semsearch/umap/\" +\n    selections.dataset.name +\n    \"/\" +\n    selections.model.name +\n    \"/\" +\n    selections.layer.name +\n    \".json\";\n\n  toolTipImgBasePath =\n    selections.basePath +\n    \"/assets/semsearch/datasets/\" +\n    selections.dataset.name +\n    \"/\";\n\n  useEffect(() => {\n    // console.log(\"json reloaded\");\n    let loadedJSON = loadJSONData(umapPath);\n    loadedJSON.then(function (data) {\n      if (data) {\n        // console.log(data.slice(0, 3));\n        // setUmapArray(data);\n        updateGraph(data);\n        scoreData.current = data;\n        // drawGraph(data);\n      }\n    });\n  }, [umapPath]);\n\n  useEffect(() => {\n    drawGraph([]);\n    toolTipImgBasePath =\n      \"/assets/semsearch/datasets/\" + selections.dataset.name;\n    toolTipImg.src = \"/assets/semsearch/datasets/iconic200/187.jpg\";\n    document.getElementById(\"embeddingchart\").prepend(toolTip);\n  }, [selections.dataset.name]);\n\n  return (\n    <div id=\"embeddingview\" className=\"mt10 embeddingbox \">\n      <div className=\"\">\n        <div className=\"w100 p10  legendbox\" id=\"legendbox\">\n          {\" \"}\n          Legend{\" \"}\n        </div>\n        <div\n          id=\"embeddingchart\"\n          className=\" w100 positionrelative   embeddingchart lightgreyhighlight\"\n        ></div>\n      </div>\n    </div>\n  );\n}\n","import { Select, SelectItem } from \"carbon-components-react\";\nimport React from \"react\";\n\nexport default function Bar(props) {\n  const selections = props.selections;\n  const config = selections.config;\n  const layers = props.models[config.getter.selectedModel].layers;\n\n  function datasetChange(e) {\n    config.setter.selectedDataset(e.target.selectedIndex);\n  }\n\n  function modelChange(e) {\n    config.setter.selectedModel(e.target.selectedIndex);\n  }\n  function layerChange(e) {\n    config.setter.selectedLayer(e.target.selectedIndex);\n  }\n\n  const datasetList = props.datasets.map((data, i) => {\n    return (\n      <SelectItem\n        value={data.name}\n        text={data.name}\n        key={\"datasetrow\" + i}\n      ></SelectItem>\n    );\n  });\n\n  const modelList = props.models.map((data, i) => {\n    return (\n      <SelectItem\n        value={data.name}\n        text={data.name}\n        key={\"datasetrow\" + i}\n      ></SelectItem>\n    );\n  });\n\n  const layerList = layers.map((data, i) => {\n    return (\n      <SelectItem\n        value={data.layer_index + \":\" + data.name}\n        text={data.layer_index + \":\" + data.name}\n        key={\"datasetrow\" + i}\n      ></SelectItem>\n    );\n  });\n \n  const datestImagePath =\n    selections.basePath + \"/assets/semsearch/images/\" + selections.dataset.icon;\n\n  const modelImagePath =\n    selections.basePath +\n    \"/assets/models/\" +\n    selections.model.name +\n    \"/\" +\n    selections.model.layers[selections.model.layers.length - 1].name +\n    \"/0.jpg\";\n\n  const layerImagePath =\n    selections.basePath +\n    \"/assets/models/\" +\n    selections.model.name +\n    \"/\" +\n    selections.layer.name +\n    \"/0.jpg\";\n\n  return (\n    <div className=\"pt10 pl10 pr10 pb5 confbarsmall \">\n      <div>\n        <div className=\"mr10 mb5 iblock\">\n          <img\n            alt=\"\"\n            src={datestImagePath}\n            className=\"  datasetboxsmall floatleft iblock\"\n          ></img>\n          <Select \n            defaultValue={selections.dataset.name}\n            style={{ width: \"100px\" }}\n            className=\"pl10\"\n            onChange={datasetChange}\n            id=\"datasetdropdown\"\n            labelText=\"Dataset\"\n          >\n            {datasetList}\n          </Select>\n        </div>\n\n        <div className=\"iblock mb5 mr10\">\n          <img\n            alt=\"\"\n            src={modelImagePath}\n            className=\"  datasetboxsmall floatleft iblock\"\n          ></img>\n\n          <Select\n            defaultValue={selections.model.name}\n            className=\"pl10\"\n            style={{ width: \"160px\" }}\n            onChange={modelChange}\n            id=\"modeldropdown\"\n            labelText=\"Model\"\n          >\n            {modelList}\n          </Select>\n        </div>\n        <div className=\"iblock mb5 mr10\">\n          <img\n            alt=\"\"\n            src={layerImagePath}\n            className=\"  datasetboxsmall floatleft iblock\"\n          ></img>\n\n          <Select\n          defaultValue={selections.layer.layer_index + \":\" + selections.layer.name}\n            style={{ width: \"180px\" }}\n            className=\"pl10\"\n            onChange={layerChange}\n            id=\"layerddropdown\"\n            labelText=\"Layer\"\n          >\n            {layerList}\n          </Select>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * @license\n * Copyright 2019 Fast Forward Labs.\n * Written by / Contact : https://github.com/victordibia\n * NeuralQA - NeuralQA: Question Answering on Large Datasets with BERT.\n * Licensed under the MIT License (the \"License\");\n * =============================================================================\n */\n\nimport React, { useState, useEffect } from \"react\";\nimport \"./embedding.css\";\nimport EmbeddingView from \"./embeddingview/EmbeddingView\";\nimport Bar from \"./embeddingview/Bar\";\n\nexport default function EmbeddingEx() {\n  //load useful data\n\n  const modelViewDetails = require(\"../../assets/semsearch/details.json\");\n  const datasetViewDetails = require(\"../../assets/semsearch/datasetdictionary.json\");\n  const topSimilar = 15;\n\n  //   specify state values and setters\n  const [selectedDataset, setSelectedDataset] = useState(0);\n  const [selectedModel, setSelectedModel] = useState(3);\n  const [selectedDimReduction, setSelectedDimReduction] = useState(0);\n  const [selectedLayer, setSelectedLayer] = useState(7);\n  const [showAdvanced, setShowAdvanced] = useState(true);\n  const [similarDrawer, setSimilarDrawer] = useState(true);\n  const [advancedDrawer, setAdvancedDrawer] = useState(false);\n\n  useEffect(() => {\n    document.title = `ConvNet Playground | Embeddings`;\n  }, []);\n\n  const selections = {\n    dataset: modelViewDetails.datasets[selectedDataset],\n    model: modelViewDetails.models[selectedModel],\n    layer: modelViewDetails.models[selectedModel].layers[selectedLayer],\n    dimreduction: modelViewDetails.dimreduction[selectedDimReduction],\n    topSimilar: topSimilar,\n    basePath: process.env.PUBLIC_URL,\n    show: {\n      getter: {\n        similarDrawer: similarDrawer,\n        advanced: showAdvanced,\n        advancedDrawer: advancedDrawer,\n      },\n      setter: {\n        similarDrawer: setSimilarDrawer,\n        advancedDrawer: setAdvancedDrawer,\n        advanced: setShowAdvanced,\n      },\n    },\n    dictionary:\n      datasetViewDetails.dictionary[\n        modelViewDetails.datasets[selectedDataset].name\n      ],\n    config: {\n      getter: {\n        selectedDataset: selectedDataset,\n        selectedModel: selectedModel,\n        selectedDimReduction: selectedDimReduction,\n        selectedLayer: selectedLayer,\n      },\n      setter: {\n        selectedDataset: setSelectedDataset,\n        selectedModel: setSelectedModel,\n        selectedDimReduction: setSelectedDimReduction,\n        selectedLayer: setSelectedLayer,\n      },\n    },\n    classlist: datasetViewDetails.classlist,\n    classes: datasetViewDetails.classes,\n  };\n\n  return (\n    <div>\n      <div className=\"flex \">\n        <div className=\"flexfull\">\n          <div className=\"  mynotif positionrelative h100 lh10 p10 lightbluehightlight   \">\n            {/* <span className=\"boldtext \">Explore Model Embeddings</span> */}\n            {/* <br /> */}\n            Embeddings are learned representations that hold semantic meaning\n            for a specific set of tasks. Similar images are assigned embeddings\n            that lie closer in embedding space and dissimilar images are farther\n            apart.\n          </div>\n        </div>\n      </div>\n\n      {/* {selections.show.getter.advanced && (\n        <ConfigView\n          models={modelViewDetails.models}\n          datasets={modelViewDetails.datasets}\n          metrics={modelViewDetails.metrics}\n          dimreduction={modelViewDetails.dimreduction}\n          selections={selections}\n        ></ConfigView>\n      )} */}\n\n      <Bar\n        models={modelViewDetails.models}\n        datasets={modelViewDetails.datasets}\n        metrics={modelViewDetails.metrics}\n        dimreduction={modelViewDetails.dimreduction}\n        selections={selections}\n      ></Bar>\n      <EmbeddingView\n        models={modelViewDetails.models}\n        datasets={modelViewDetails.datasets}\n        selections={selections}\n      ></EmbeddingView>\n\n      <br />\n      <br />\n      <br />\n    </div>\n  );\n}\n","/**\n * @license\n * Copyright 2019 Fast Forward Labs.\n * Written by Victor Dibia / Contact : https://github.com/victordibia\n * CaseQA - CaseQA: Question Answering on Large Datasets with BERT.\n * Licensed under the MIT License (the \"License\");\n * =============================================================================\n */\n\nimport React, { Component } from \"react\";\nimport { Route, HashRouter } from \"react-router-dom\";\nimport Header from \"./header/Header\";\nimport Footer from \"./footer/Footer\";\nimport SemanticEx from \"./semanticex/SemanticEx\";\nimport EmbeddingEx from \"./embeddingex/EmbeddingEx\";\nimport { createBrowserHistory } from \"history\";\n\nconst history = createBrowserHistory({\n  basename: \"\", // The base URL of the app (see below)\n  forceRefresh: false, // Set true to force full page refreshes\n  keyLength: 6, // The length of location.key\n  // A function to use to confirm navigation with the user (see below)\n  getUserConfirmation: (message, callback) => callback(window.confirm(message)),\n});\n\nhistory.listen((location) => {\n  // console.log(location.pathname, location.hash)\n});\n\nlet linkHolder = {};\n\nfunction updateLh(location) {\n  if (location.hash in linkHolder) {\n    linkHolder[location.hash] = linkHolder[location.hash] + 1;\n  } else {\n    linkHolder[location.hash] = 0;\n  }\n}\n\nhistory.listen((location) => {\n  updateLh(location);\n});\n\nclass Main extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {};\n    updateLh(window.location);\n  }\n\n  componentDidMount() {}\n  render() {\n    return (\n      <HashRouter>\n        <div>\n          {\" \"}\n          hey\n          <Header></Header>\n          <main className=\"container-fluid p10\">\n            <Route exact path=\"/\" component={SemanticEx} />\n            <Route exact path=\"/embeddings\" component={EmbeddingEx} />\n          </main>\n        </div>\n\n        <div id=\"footer\">\n          <Footer />\n        </div>\n      </HashRouter>\n    );\n  }\n}\n\nexport default Main;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./components/template.scss\";\nimport \"./components/template.css\";\nimport App from \"./components/Main\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAAXNSR0IArs4c6QAAAKpJREFUaAXt0rENwDAMxMAk+y+pSWLALTeg6FId//zOzP8set+i1ptasF084YRlC/SlZaDISRiTyA4Jy0CRkzAmkR0SloEiJ2FMIjskLANFTsKYRHZIWAaKnIQxieyQsAwUOQljEtkhYRkochLGJLJDwjJQ5CSMSWSHhGWgyEkYk8gOCctAkZMwJpEdEpaBIidhTCI7JCwDRU7CmER2SFgGipyEMYnssE74AKuIBBpevYWDAAAAAElFTkSuQmCC\""],"sourceRoot":""}